digraph BotFlow {
    rankdir=TB;
    node [shape=box, style=rounded];

    START [label="Start", shape=circle, style=filled, fillcolor=green];
    START -> welcome;
    welcome [label="welcome", shape=diamond, style=filled, fillcolor=yellow];
    welcome -> route_user [label="check passed", color=green];
    welcome -> welcome [label="poll 1s", color=gray, style=dashed];
    route_user [label="route_user", shape=diamond, style=filled, fillcolor=yellow];
    route_user -> already_paid [label="check passed", color=green];
    route_user -> route_user [label="poll 1s", color=gray, style=dashed];
    show_welcome [label="show_welcome\n"üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {user.firs..."", shape=box, style="rounded,filled", fillcolor=lightgray];
    show_welcome -> ask_fullname [label="click 'üí≥ –û–ø–ª–∞—Ç–∏—Ç—å –±–∏–ª–µ—Ç –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ'"];
    ask_fullname [label="ask_fullname\n"üìù –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞–ø–∏—à–∏—Ç–µ –≤–∞—à–∏ –§–∞..."", shape=box, style="rounded,filled", fillcolor=lightgray];
    ask_fullname -> payment_info [style=dashed];
    payment_pending [label="payment_pending\n"üí∞ <b>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –æ–ø–ª–∞—Ç—ã:</b..."", shape=box, style="rounded,filled", fillcolor=lightgray];
    payment_pending -> awaiting_payment [style=dashed];
    already_paid [label="already_paid\n"‚úÖ <b>–í—ã —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –Ω..."", shape=doublecircle, style=filled, fillcolor=lightblue];
    payment_info [label="payment_info\n"üí∞ <b>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –æ–ø–ª–∞—Ç—ã:</b..."", shape=box, style="rounded,filled", fillcolor=lightgray];
    payment_info -> awaiting_payment [style=dashed];
    awaiting_payment [label="awaiting_payment", shape=diamond, style=filled, fillcolor=yellow];
    awaiting_payment -> success [label="check passed", color=green];
    awaiting_payment -> awaiting_payment [label="poll 10s", color=gray, style=dashed];
    success [label="success\n"‚úÖ <b>–û–ø–ª–∞—Ç–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞!</b>üéä..."", shape=doublecircle, style=filled, fillcolor=lightblue];
    stats [label="stats", shape=doublecircle, style=filled, fillcolor=lightblue];
}